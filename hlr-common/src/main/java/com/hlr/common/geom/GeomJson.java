package com.hlr.common.geom;

import com.alibaba.fastjson.JSONArray;
import com.alibaba.fastjson.JSONObject;

/**
 * GeomJson
 * Description:
 * date: 2023/9/15 17:44
 *
 * @author hlr
 */
public class GeomJson {

    private static final String GEOM_TYPE = "type";
    private static final String GEOM_COORDINATES = "coordinates";
    /**
     * 面
     */
    public static final String GEOM_TYPE_POLYGON = "Polygon";
    /**
     * 多面
     */
    public static final String GEOM_TYPE_MULTI_POLYGON = "MultiPolygon";
    /**
     * 点
     */
    public static final String GEOM_TYPE_POINT = "Point";
    /**
     * 多点
     */
    public static final String GEOM_TYPE_MULTI_POINT = "MultiPoint";
    /**
     * 线
     */
    public static final String GEOM_TYPE_LINE_STRING = "LineString";
    /**
     * 多线
     */
    public static final String GEOM_TYPE_MULTI_LINE_STRING = "MultiLineString";
    /**
     * 集合
     */
    public static final String GEOM_TYPE_GEOMETRY_COLLECTION = "GeometryCollection";


    /**
     * @param geometry
     * "type": "Polygon",
     *         "coordinates": [
     *           ]
     *
     * @return geom
     */
    public static String geoJsonToGeom(JSONObject geometry){

        // 数据格式错误
        if(geometry == null || StringUtils.isBlank(geometry.getString(GEOM_TYPE)) || CollectionUtils.isEmpty(geometry.getJSONArray(GEOM_COORDINATES)) ){
            throw CommonException.error("数据格式错误");
        }
        String type = geometry.getString(GEOM_TYPE);
        JSONArray coordinates = geometry.getJSONArray(GEOM_COORDINATES);
        String geom = null;
        switch (type){
            case GEOM_TYPE_POLYGON:
                geom = polygon(coordinates);
                break;
            case GEOM_TYPE_MULTI_POLYGON:
                geom = multiPolygon(coordinates);
                break;
            default:
                break;
        }


        return geom;
    }

    /**
     *
     * @param coordinates
     * MULTIPOLYGON (((1 5, 5 5, 5 1, 1 1, 1 5)), ((6 5, 9 1, 6 1, 6 5)))
     *
     * @return
     */
    private static String multiPolygon(JSONArray coordinates) {
        StringBuilder result = new StringBuilder("MULTIPOLYGON (");
        coordinates.stream().forEach(o->{
            result.append("(");
            JSONArray polygon = (JSONArray) o;
            pointSwap(result, polygon);
            result.append("),");
        });
        result.deleteCharAt(result.length()-1);
        result.append(")");
        return result.toString();
    }

    private static void pointSwap(StringBuilder result, JSONArray polygon) {
        polygon.stream().forEach(e->{
            result.append("(");
            JSONArray area = (JSONArray) e;
            area.stream().forEach(p->{
                JSONArray point = (JSONArray)p;
                String o1 = point.get(0).toString();
                String o2 = point.get(1).toString();
                result.append(o1).append(" ").append(o2).append(",");
            });
            result.deleteCharAt(result.length()-1);
            result.append("),");
        });
        result.deleteCharAt(result.length()-1);
    }

    /**
     *
     * @param coordinates
     * POLYGON ((0 0 0,4 0 0,4 4 0,0 4 0,0 0 0),(1 1 0,2 1 0,2 2 0,1 2 0,1 1 0))
     * @return geom
     */
    private static String polygon(JSONArray coordinates) {
        StringBuilder result = new StringBuilder("POLYGON (");
        pointSwap(result, coordinates);
        result.append(")");
        return result.toString();
    }

    public static void main(String[] args) {
        StringBuilder test =new StringBuilder("{\"type\":\"Polygon\",\"coordinates\":[[[118.89574637,30.32330554],[118.89572648,30.32304832],[118.89576301,30.32283215],[118.89580993,30.32268191],[118.89589047,30.3225924],[118.89606896,30.32249198]\n");
        test.append(",[118.89627038,30.32241755],[118.89631933,30.32239946],[118.89648715,30.32228626],[118.89706554,30.32160359],[118.89743182,30.32117125],[118.8976771,30.32085493],[118.89796015,30.32038649],\n");
        test.append("[118.89831429,30.31994749],[118.89864782,30.31961207],[118.8989545,30.31947484],[118.89905902,30.31936027],[118.89911699,30.31919327],[118.89915172,30.31909317],[118.89914257,30.31889014],\n");
        test.append("[118.89917322,30.31847278],[118.89923475,30.3182884],[118.89932207,30.31812226],[118.89949873,30.3178694],[118.89989239,30.31721427],[118.90028528,30.3164121],[118.90042619,30.31619502],\n");
        test.append("[118.90047706,30.31617289],[118.90050692,30.31617732],[118.90060869,30.31619241],[118.90070281,30.31620636],[118.90084119,30.31627066],[118.90088175,30.31630336],[118.90092032,30.31633446],\n");
        test.append("[118.90120291,30.31643605],[118.90172995,30.31657126],[118.9020107,30.31667915],[118.9022304,30.31669106],[118.9022666,30.31669303],[118.90245396,30.31664679],[118.90268562,30.31664242],\n");
        test.append("[118.9029562,30.31670331],[118.90311668,30.3167752],[118.90346308,30.31693035],[118.90350802,30.31680716],[118.90364325,30.31656657],[118.90367059,30.31652349],[118.90416706,30.31574114],\n");
        test.append("[118.90455779,30.31534573],[118.90493244,30.31499996],[118.90495295,30.31498104],[118.90518644,30.31460688],[118.90538262,30.31394285],[118.90544225,30.313607],[118.90549807,30.31329259],\n" +
                "[118.90554998,30.31312253],[118.90565817,30.31276807],[118.9056867,30.31235853],[118.90605444,30.31237002],[118.90657882,30.31218949],[118.90675199,30.31201538],[118.90682525,30.3119417],\n" +
                "[118.90695573,30.31174435],[118.90716245,30.31153413],[118.90739742,30.31120416],[118.90763467,30.31090794],[118.90771103,30.31081261],[118.90781843,30.3107639],[118.90797911,30.31073999],\n" +
                "[118.90809667,30.31074182],[118.90828058,30.31077858],[118.90850682,30.31090674],[118.90857096,30.31098394],[118.90869453,30.31108871],[118.90884553,30.31118737],[118.90909879,30.31131756],\n" +
                "[118.90969574,30.31168153],[118.90990335,30.31176624],[118.91022202,30.31185729],[118.91036383,30.31184674],[118.91082784,30.31171983],[118.91105279,30.3115909],[118.91111225,30.31152482],\n" +
                "[118.91105001,30.31143919],[118.91093854,30.31137349],[118.91078834,30.31132532],[118.91060162,30.31116593],[118.91042661,30.31097322],[118.91031435,30.31084965],[118.91029818,30.3107505],\n" +
                "[118.91029342,30.31072139],[118.91033477,30.31064091],[118.91034187,30.31062709],[118.91063782,30.31044916],[118.91120398,30.30990367],[118.91136832,30.30967052],[118.91153219,30.30950681],\n" +
                "[118.91152012,30.30936691],[118.91146116,30.30922694],[118.91136163,30.30909951],[118.91121865,30.30898106],[118.91113499,30.30888566],[118.91109088,30.30878427],[118.91109839,30.30864002],\n" +
                "[118.91111124,30.3086024],[118.91112385,30.30856538],[118.91116111,30.30851606],[118.91127087,30.3084313],[118.91145851,30.30829174],[118.91163312,30.3081619],[118.91182147,30.30805253],\n" +
                "[118.91204244,30.30787668],[118.91224275,30.30768216],[118.91238321,30.30754578],[118.91270007,30.30730037],[118.91299156,30.30709263],[118.91324064,30.30695038],[118.9133203,30.30688149],\n");
        test.append("[118.91334392,30.30686105],[118.91337898,30.30677384],[118.91340436,30.30659366],[118.91346822,30.30637321],[118.91353887,30.30627457],[118.91361261,30.30621385],[118.91371336,30.3061741]\n" +
                ",[118.91404428,30.30595405],[118.91418855,30.30583348],[118.914274,30.3056655],[118.91454832,30.30512634],[118.91455778,30.30510774],[118.9149057,30.30460823],[118.91509944,30.30429865],\n" +
                "[118.91517263,30.30411734],[118.91527908,30.30385366],[118.91529561,30.30368423],[118.91528423,30.30363412],[118.91524286,30.30345199],[118.91507537,30.30270827],[118.91510457,30.30236125],\n" +
                "[118.91514972,30.30217672],[118.91535861,30.30176942],[118.91537312,30.30174111],[118.91537862,30.30160135],[118.91523392,30.30095974],[118.91526732,30.30064432],[118.91534848,30.30029774],\n" +
                "[118.91565894,30.29971402],[118.91646247,30.29874654],[118.91664593,30.29854962],[118.91681542,30.29845903],[118.91705267,30.29835978],[118.91712838,30.29832812],[118.9171992,30.29812577],\n");
        test.append("[118.91719216,30.29793448],[118.91722806,30.29772394],[118.9172866,30.29738054],[118.91729664,30.29727518],[118.91735311,30.29668206],[118.91740122,30.2963803],[118.91747284,30.29621854],\n" +
                "[118.9175763,30.29614001],[118.91780295,30.29605891],[118.91865543,30.29613992],[118.91881806,30.29600145],[118.91875339,30.29585209],[118.91883216,30.29583391],[118.91919776,30.29574992],\n" +
                "[118.91948555,30.29568383],[118.91954899,30.29566924],[118.91970155,30.29561457],[118.91983146,30.29553602],[118.91968556,30.29538361],[118.91961847,30.29531354],[118.91939701,30.29518813],\n" +
                "[118.91909203,30.29488525],[118.91889814,30.29459503],[118.91876499,30.29450192],[118.91869727,30.29442921],[118.91867621,30.2943692],[118.9186509,30.29429701],[118.91860585,30.29416868],\n" +
                "[118.91870013,30.29413156],[118.91879264,30.29405567],[118.91885242,30.29399376],[118.91904506,30.29379423],[118.91914514,30.29369056],[118.91908504,30.29351419],[118.91909659,30.29343581],\n" +
                "[118.91912915,30.29336843],[118.91915258,30.29334612],[118.91931989,30.2931869],[118.91941226,30.293028],[118.91941648,30.29296761],[118.91943617,30.29268546],[118.91936911,30.29251771],\n" +
                "[118.91935839,30.29249089],[118.91939745,30.29245514],[118.91954617,30.29219209],[118.91953506,30.29211715],[118.91952651,30.29205932],[118.9195391,30.29202968],[118.9195779,30.29200405],\n");
        test.append("[118.91969426,30.29192722],[118.91981136,30.29188309],[118.91994206,30.29181201],[118.91994276,30.29180228],[118.91994735,30.2917381],[118.92016201,30.29142146],[118.92045317,30.29122993],\n" +
                "[118.92049185,30.29113579],[118.92050171,30.29111089],[118.92034834,30.29097923],[118.92044397,30.29082667],[118.92047366,30.29079366],[118.92051887,30.29074342],[118.92061851,30.29065788],\n" +
                "[118.92081554,30.29048873],[118.92066297,30.29034142],[118.92059002,30.29030202],[118.92046641,30.29028567],[118.92020507,30.29029884],[118.91998297,30.29045035],[118.91989828,30.29052503],\n" +
                "[118.91979038,30.29062013],[118.91958127,30.29073387],[118.91922473,30.2909925],[118.91913016,30.29104223],[118.91909468,30.29106088],[118.91890269,30.2910638],[118.91861753,30.29103571],\n" +
                "[118.918553,30.29102935],[118.91843448,30.29096523],[118.91838969,30.29081423],[118.91840273,30.29072414],[118.91844145,30.29065229],[118.91852294,30.29056727],[118.91875622,30.29044023],\n" +
                "[118.91890011,30.29029259],[118.91902095,30.2901177],[118.91906903,30.28987456],[118.9190484,30.28968949],[118.91898205,30.28958373],[118.91892041,30.28948548],[118.91852333,30.2891945],\n" +
                "[118.91848219,30.28916437],[118.91838641,30.2890437],[118.91839799,30.28902184],[118.91843283,30.2889565],[118.91846283,30.28885483],[118.91854084,30.28877406],[118.91857258,30.28874119],\n" +
                "[118.91879123,30.2884318],[118.91886288,30.2882944],[118.91895562,30.28793404],[118.91896874,30.28788306],[118.91899586,30.28774979],[118.91898853,30.28753617],[118.91898681,30.28748634],\n");
        test.append("[118.91890807,30.28704524],[118.91890328,30.28701842],[118.91889372,30.28695466],[118.91900796,30.28695292],[118.91919891,30.28694588],[118.9193858,30.28693228],[118.91941375,30.28692879],\n" +
                "[118.9194759,30.28692103],[118.91959277,30.28688837],[118.91983023,30.28687718],[118.91981953,30.28687177],[118.91981786,30.2868616],[118.91982945,30.28679219],[118.91984291,30.28658795],\n" +
                "[118.91984696,30.28652663],[118.91987676,30.28647285],[118.91987961,30.28641003],[118.91986819,30.28633437],[118.9198354,30.28624591],[118.91982571,30.28606813],[118.91983153,30.28603841],\n" +
                "[118.91998208,30.28592961],[118.92004849,30.2858535],[118.92011198,30.28545205],[118.92012187,30.28538958],[118.92018242,30.28528634],[118.92021374,30.28515132],[118.92021778,30.28510624],\n" +
                "[118.920158,30.28493619],[118.92015591,30.28471067],[118.92018412,30.28450796],[118.92018158,30.28448232],[118.92017641,30.28442967],[118.92016753,30.28433926],[118.92016484,30.28431206],\n" +
                "[118.92019513,30.28424197],[118.92033986,30.28404743],[118.92041092,30.28390549],[118.92042625,30.2836648],[118.92049393,30.283252],[118.92050865,30.28316216],[118.92055054,30.28313365],\n" +
                "[118.92056125,30.28307691],[118.92056066,30.28277925],[118.92055736,30.28276927],[118.92052797,30.28267976],[118.92057016,30.28229045],[118.92066867,30.28219656],[118.92076481,30.28198719],\n");
        test.append("[118.92084396,30.28196349],[118.92089932,30.28191885],[118.92090972,30.28190717],[118.92120286,30.2815786],[118.92123271,30.28146339],[118.9212005,30.28116934],[118.92119661,30.28113387],\n" +
                "[118.92120497,30.28099683],[118.92116374,30.28078634],[118.92108084,30.28062001],[118.92094256,30.28034254],[118.92088186,30.28007596],[118.92081505,30.27993659],[118.92076247,30.27982692],\n" +
                "[118.92063798,30.27968429],[118.92041399,30.27956247],[118.92018796,30.27940998],[118.92008954,30.27932528],[118.92002506,30.27918765],[118.9199952,30.27906744],[118.91998896,30.27894087],\n" +
                "[118.91998831,30.27892758],[118.91992115,30.27883501],[118.91970879,30.27864837],[118.91958204,30.27851202],[118.91938814,30.27798006],[118.91938049,30.27773013],[118.91935712,30.2776145],\n" +
                "[118.91929707,30.27746066],[118.9192387,30.27736366],[118.91912824,30.27726103],[118.91909178,30.27722716],[118.91904137,30.27714286],[118.91896275,30.27709079],[118.91899447,30.27709737],\n" +
                "[118.91898167,30.27705216],[118.91898282,30.27668236],[118.91891907,30.2763914],[118.91879242,30.27605808],[118.91876504,30.27598603],[118.91875296,30.27568897],[118.91869403,30.27557877],\n" +
                "[118.91862206,30.27534838],[118.91859795,30.27529283],[118.91856032,30.27510491],[118.91853077,30.27474839],[118.91836736,30.27466585],[118.91830769,30.27465905],[118.91814652,30.27448634],\n" +
                "[118.91800477,30.27414692],[118.91798696,30.27409844],[118.91753466,30.27286674],[118.91731875,30.27233279],[118.9171396,30.27196329],[118.91698852,30.2717636],[118.91678061,30.27206405],\n");
        test.append("[118.91654412,30.2725158],[118.91653697,30.27255768],[118.91649802,30.272786],[118.91648783,30.27292257],[118.9164812,30.27301136],[118.91650021,30.27329474],[118.91650273,30.27333248],\n" +
                "[118.91653203,30.2737701],[118.91654709,30.27399507],[118.91652678,30.27460495],[118.91652569,30.2746371],[118.91620615,30.27513777],[118.91589887,30.27538326],[118.91572824,30.27557127],\n" +
                "[118.91557996,30.27579734],[118.91552273,30.27592585],[118.91536503,30.27643407],[118.91535466,30.27646745],[118.91530719,30.27686213],[118.91531353,30.2770516],[118.91527883,30.27727679],\n" +
                "[118.9151911,30.27734373],[118.91482264,30.27762479],[118.9143108,30.27795609],[118.9142808,30.27803996],[118.91412744,30.27846869],[118.91388792,30.27890236],[118.91345471,30.27946251],\n" +
                "[118.91344657,30.2794788],[118.91336929,30.27963318],[118.91336767,30.2797793],[118.91343241,30.27997826],[118.91352702,30.28010765],[118.91366339,30.28029407],[118.91371678,30.28034739],\n" +
                "[118.91420089,30.28083069],[118.9142498,30.28104307],[118.91423317,30.28112352],[118.91415584,30.28149778],[118.91409257,30.2816073],[118.91377979,30.28193392],[118.91366743,30.28225771],\n");
        test.append("[118.91360913,30.28266132],[118.9133103,30.28329982],[118.91330006,30.28332171],[118.9132305,30.28356918],[118.91314629,30.28422241],[118.91301777,30.28503765],[118.91291171,30.28552383],\n" +
                "[118.91272974,30.28594806],[118.91259281,30.28605515],[118.91225046,30.28611095],[118.91167745,30.2863885],[118.91146911,30.28645892],[118.9112683,30.28655377],[118.91097243,30.28693736],\n" +
                "[118.91091219,30.28698195],[118.91080983,30.28701718],[118.91061683,30.28701737],[118.91051442,30.28703004],[118.91023121,30.28711338],[118.90996907,30.28723748],[118.90969338,30.28746971],\n" +
                "[118.90934645,30.28783304],[118.90931913,30.28786165],[118.90908564,30.28814833],[118.90879964,30.28886934],[118.90867779,30.28925877],[118.90865673,30.28972267],[118.90843835,30.28996945],\n" +
                "[118.90828209,30.29026309],[118.90823511,30.29042324],[118.90823555,30.2905333],[118.90831258,30.29067375],[118.90843585,30.2907767],[118.90865149,30.29083441],[118.90891102,30.29092949],\n" +
                "[118.90945076,30.29108011],[118.90978924,30.29110367],[118.91005852,30.29107614],[118.91020304,30.29116754],[118.91036855,30.29114457],[118.91047887,30.29110219],[118.91064487,30.29110177],\n" +
                "[118.91070197,30.2911294],[118.91061531,30.29124584],[118.91053397,30.29131733],[118.91047078,30.2913637],[118.91042844,30.29137992],[118.91038234,30.29133952],[118.91029297,30.29135293],\n" +
                "[118.91001611,30.29147086],[118.90991403,30.2914802],[118.9098786,30.29145432],[118.90985157,30.29145739],[118.90967076,30.29150246],[118.90963668,30.29150558],[118.90934028,30.29149409],\n" +
                "[118.90925762,30.29150513],[118.90916477,30.29164867],[118.90908152,30.29165278],[118.90877323,30.29166796],[118.90875517,30.29174177],[118.90868464,30.29221743],[118.90891075,30.29230049],\n" +
                "[118.9091516,30.29236851],[118.90915669,30.29238117],[118.90915792,30.29240748],[118.90913226,30.29241808],[118.90913054,30.29241879],[118.90915472,30.29247705],[118.90917357,30.29251991],\n" +
                "[118.90899613,30.29257517],[118.90895856,30.29264545],[118.90889269,30.29274789],[118.90878146,30.29270842],[118.90854834,30.29314587],[118.90854857,30.29372149],[118.90860066,30.29373577],\n");
        test.append("[118.9094218,30.29356955],[118.90942809,30.29356845],[118.90943056,30.29364293],[118.90942822,30.29385483],[118.90990214,30.29385878],[118.90993409,30.29395502],[118.90993652,30.29396234],\n" +
                "[118.90996509,30.29404637],[118.90997012,30.29406239],[118.91000546,30.29430366],[118.91001805,30.29435867],[118.9100719,30.29459398],[118.91016983,30.29484007],[118.9102144,30.29498399],\n" +
                "[118.91018963,30.29513733],[118.91016584,30.29520056],[118.91015349,30.2952739],[118.91012624,30.29547206],[118.91012083,30.29552782],[118.910111,30.2956891],[118.90911821,30.29544665],\n" +
                "[118.90894515,30.29562186],[118.90883914,30.2958201],[118.90874443,30.29599723],[118.90868143,30.29608238],[118.90865015,30.29609114],[118.90845987,30.29608685],[118.90814271,30.29604361],\n" +
                "[118.9079362,30.29603288],[118.90774776,30.29607008],[118.9076018,30.29616538],[118.90732973,30.29650856],[118.90711696,30.29703174],[118.90709439,30.29728681],[118.90697705,30.29787662],\n" +
                "[118.90655925,30.29878864],[118.90650673,30.29886667],[118.9062804,30.2990948],[118.90613145,30.29929199],[118.90600665,30.29953267],[118.90588244,30.29968046],[118.90567051,30.29981856],\n" +
                "[118.90538403,30.29990359],[118.90515705,30.29991974],[118.90506725,30.29990995],[118.90479817,30.29977512],[118.904591,30.29976617],[118.90448481,30.29978208],[118.90413485,30.29983451],\n" +
                "[118.90370932,30.29998702],[118.90349332,30.30000051],[118.90330314,30.29998809],[118.90321741,30.29995761],[118.90311572,30.29987557],[118.90298208,30.29967603],[118.90289918,30.29948411],\n" +
                "[118.90283975,30.29927595],[118.90278015,30.29864608],[118.90273138,30.29847879],[118.90267087,30.29842418],[118.90258951,30.29844154],[118.90225226,30.29877243],[118.90168638,30.29923943],\n" +
                "[118.90123803,30.29933488],[118.90101006,30.29941144],[118.9008938,30.29947045],[118.90065171,30.29959332],[118.90054852,30.29967365],[118.90032887,30.30008489],[118.9003082,30.30017039],\n");
        test.append("[118.90019504,30.30063849],[118.90006063,30.30089172],[118.90004459,30.3010792],[118.90007848,30.30116621],[118.90024922,30.30160461],[118.90041181,30.30202214],[118.90037129,30.30213274],\n" +
                "[118.90028567,30.30217712],[118.90004183,30.30210923],[118.89986746,30.30199321],[118.89970461,30.30191517],[118.89942561,30.30182264],[118.89912702,30.30174346],[118.89900402,30.30179203],\n" +
                "[118.8989245,30.30196003],[118.89867653,30.30278151],[118.8986502,30.30286872],[118.89854662,30.30309604],[118.89851345,30.30313365],[118.89842808,30.30315548],[118.89832107,30.30315928],\n" +
                "[118.89826398,30.30316131],[118.89807442,30.30308485],[118.89781224,30.30309438],[118.89772038,30.30308188],[118.89757057,30.30297237],[118.897512,30.30294935],[118.89745296,30.30294884],\n" +
                "[118.89736713,30.30298238],[118.89728295,30.30306393],[118.897261,30.30308521],[118.89725943,30.30309447],[118.89724018,30.3032086],[118.89724841,30.30325242],[118.89725852,30.30330618],\n" +
                "[118.89726291,30.30350014],[118.89720299,30.30359615],[118.89667512,30.30385779],[118.89662782,30.30399539],[118.8966159,30.30406744],[118.89664113,30.30413531],[118.89673513,30.30420574],\n" +
                "[118.89681576,30.30426617],[118.89692719,30.30434968],[118.89702433,30.30449736],[118.89702982,30.30450568],[118.89717075,30.30494252],[118.8972651,30.30533749],[118.89727975,30.30544856],\n" +
                "[118.89726683,30.30552692],[118.89719896,30.30558046],[118.89680769,30.30557085],[118.89655824,30.30559581],[118.89607029,30.30567918],[118.89585975,30.30574776],[118.89534865,30.30587423],\n");
        test.append("[118.89514397,30.30598525],[118.895022,30.30632246],[118.89493876,30.30641195],[118.89486949,30.30627596],[118.89475416,30.30604961],[118.894764,30.30577459],[118.894394,30.30565602],\n" +
                "[118.89429454,30.30563997],[118.89408697,30.3056065],[118.89398549,30.30538647],[118.89387453,30.30525925],[118.89385921,30.30525546],[118.89371646,30.30522004],[118.89355609,30.3052689],\n" +
                "[118.89324112,30.30536485],[118.89270834,30.30548843],[118.89235088,30.30549442],[118.89213005,30.305608],[118.89198955,30.30577097],[118.89200114,30.30585415],[118.89210314,30.30658642],\n" +
                "[118.89217528,30.30681883],[118.89233212,30.30707993],[118.89242047,30.30728363],[118.89244801,30.30743268],[118.8924472,30.3074979],[118.8924378,30.3082579],[118.89252002,30.30851747],\n" +
                "[118.89261716,30.30874378],[118.89259889,30.30929654],[118.89265592,30.30940255],[118.89292305,30.30976561],[118.89294693,30.30992636],[118.89273032,30.31006162],[118.8925434,30.31022727],\n" +
                "[118.89253576,30.31023404],[118.89227153,30.31067378],[118.89214838,30.31082788],[118.89196345,30.31097515],[118.89171363,30.31120574],[118.8914361,30.31141715],[118.89093355,30.3117313],\n" +
                "[118.89039198,30.31202164],[118.89013513,30.31218452],[118.8897601,30.31236354],[118.88972067,30.31236418],[118.88957658,30.3123665],[118.88927896,30.31242079],[118.88896768,30.31251467],\n" +
                "[118.88857061,30.31275032],[118.88746888,30.31285307],[118.88743626,30.31285613],[118.88614721,30.31310854],[118.8855725,30.31320105],[118.88504426,30.3133968],[118.88480906,30.3135391],\n");
        test.append("[118.88452484,30.31373962],[118.88428259,30.31396125],[118.88351273,30.31486296],[118.88300624,30.31529159],[118.88251319,30.31577445],[118.88249051,30.315809],[118.88208938,30.31642025],\n" +
                "[118.88192762,30.31670299],[118.88183251,30.31706747],[118.88189296,30.31723936],[118.88194474,30.31725604],[118.88221973,30.31715466],[118.88272218,30.31713822],[118.88326402,30.31725829],\n" +
                "[118.88331045,30.31729025],[118.88369039,30.31742158],[118.88424124,30.31758412],[118.8847535,30.31779143],[118.88495495,30.3179059],[118.88500186,30.31794959],[118.88502864,30.31799041],\n" +
                "[118.88504157,30.31805997],[118.88497001,30.31823794],[118.88487694,30.31836794],[118.88474729,30.31848951],[118.88468877,30.31854438],[118.88494579,30.3185263],[118.88521364,30.31852281],\n" +
                "[118.88534711,30.31857049],[118.88545321,30.31865853],[118.88555133,30.31886285],[118.8856694,30.31908475],[118.88584162,30.31925479],[118.88593474,30.31931377],[118.88603476,30.31934944],\n" +
                "[118.88630885,30.31939254],[118.88656926,30.31945871],[118.88680316,30.31950713],[118.88692314,30.31955469],[118.88712897,30.31971339],[118.8873286,30.31983135],[118.88746853,30.3198965],\n" +
                "[118.88778852,30.32002711],[118.88794825,30.3201157],[118.8880609,30.32022129],[118.88818034,30.32031529],[118.88831204,30.32051989],[118.88841695,30.32071264],[118.8885021,30.32088772],\n" +
                "[118.88868117,30.32104041],[118.88881447,30.32109386],[118.88890805,30.32111207],[118.88904175,30.3211307],[118.88913513,30.32116631],[118.88922844,30.32120778],[118.88939477,30.32131382],\n" +
                "[118.88954794,30.32138494],[118.88978849,30.32143343],[118.88998879,30.32149328],[118.89014216,30.3215469],[118.89028829,30.32165277],[118.8904678,30.32177642],[118.89068721,30.32191196],\n" +
                "[118.89080038,30.32197101],[118.8909872,30.32203654],[118.89122114,30.32207344],[118.89148173,30.32213383],[118.89157507,30.32216366],[118.89174118,30.3222871],[118.89191446,30.32236415],\n" +
                "[118.89210163,30.32238901],[118.89224157,30.32245415],[118.89239447,30.32256008],[118.89251397,30.32264828],[118.89261388,30.32269558],[118.89276795,30.32269689],[118.89292142,30.3227506],\n" +
                "[118.89308782,30.32283913],[118.89324072,30.32294505],[118.89335317,30.32306814],[118.89346531,30.32322025],[118.8936179,30.32334359],[118.89379807,30.32340906],[118.89400555,30.32342246],\n" +
                "[118.89431418,30.32337274],[118.89457637,30.32328198],[118.89475709,30.32328928],[118.89499101,30.3233378],[118.8951176,30.32339695],[118.89528341,30.32353789],[118.8954614,30.32364032],\n" +
                "[118.89571612,30.32377407],[118.89578917,30.32383279],[118.89582845,30.32390867],[118.8958331,30.32393893],[118.89584958,30.3238668],[118.89585437,30.32384584],[118.8958464,30.32371228],\n" +
                "[118.89574637,30.32330554]]]}");

        JSONObject jsonObject = JSONObject.parseObject(test.toString());
        System.out.println(geoJsonToGeom(jsonObject));
    }
    
}
